{% extends 'layouts/base.html' %} {% block title %}Booking room - Elite-Hotel{%
endblock %} {% block content %}
<div class="row">
  <div class="col-md-5 col-xs-12">
    <form action="" class="form-group booking-info">
      {% if current_user.is_authenticated %}
      <div class="first-customer">
        <label><b>CUSTOMER 1</b></label>

        <label style="display: block" class="mt-1" for="cus1">Name</label>
        <input
          name="customerName1"
          id="cus1"
          type="text"
          class="form-control mt-2"
          value="{{ current_user.name }}"
          readonly
        />

        <label style="display: block" class="mt-2" for="cus1-type"
          >Customer Type</label
        >
        <select class="form-control mt-2" name="customerType" id="cus1-type">
          <option>{{ customer_type }}</option>
        </select>
      </div>
      <div class="rest-customer"></div>
      {% if room.capacity > 1 %}
      <input
        onclick="addCustomer({{ room.capacity }}, {{ role_cus }})"
        type="button"
        class="btn btn-custom"
        value="+ Add customer"
      />
      {% endif %}

      <!--            {% for i in range(2, room.capacity + 1) %}-->
      <!--                        <label class="mt-3"><b>CUSTOMER {{ i }}</b></label>-->

      <!--                        <label style="display: block;" class="mt-1" for="cus1">Name</label>-->
      <!--                        <input name="customerName{{ i }}" id="cus{{ i }}" type="text" class="form-control mt-2">-->

      <!--                        <label style="display: block;" class="mt-2" for="cus{{ i }}-type">Customer Type</label>-->
      <!--                        <select class="form-control mt-2" name="customerType{{ i }}" id="cus{{ i }}-type">-->
      <!--                            {% for r in role_cus %}-->
      <!--                            <option>{{ r }}</option>-->
      <!--                            {% endfor %}-->
      <!--                        </select>-->
      <!--            {% endfor %}-->
      {% else %}
      <p class="text-danger">
        <b><i>PLEASE LOGIN TO BOOK ROOM!</i></b>
      </p>
      {% endif %}
      <input
        style="margin-bottom: 3rem"
        type="submit"
        class="form-group mt-3 btn btn-custom"
        value="Book room"
      />
    </form>
  </div>
  <div class="col-md-7 col-xs-12">
    <!--        <h3>{{room.name}} with Elite-Hotel best services</h3>-->
    <p style="color: green" class="mt-5">
      <i>
        For <b>{{ room.name }}</b>, there is
        <b>{{ room.room_type }}</b> available. Please ensure you select the
        appropriate room based on your requirements. We hope you have a
        wonderful time at Elite-Hotel!
      </i>
    </p>
    <div
      class="img mt-2"
      style="
        padding: 0.75rem;
        border-radius: 12px;
        box-shadow: rgba(0, 0, 0, 0.24) 0px 3px 8px;
        display: flex;
        align-items: center;
        justify-content: center;
      "
    >
      <img
        style=""
        width="100%"
        src="{{ url_for('static', filename=room.image) }}"
        alt=""
      />
    </div>
  </div>
</div>

<script>
  count = 1;

  const deleteCustomer = (obj) => {
    count--
    const divParent = obj.parentNode.id;
    for (
      var i = 0;
      i < document.querySelectorAll("div.rest-customer > div").length;
      i++
    ) {
      if (
        document.querySelectorAll("div.rest-customer > div")[i].id === divParent
      ) {
        document.querySelectorAll("div.rest-customer > div")[i].remove();
      }
    }
  };

  const addCustomer = (capacity, roleCus) => {
    if (count < capacity) {
      count++;

      var addedCustomer = document.createElement("div");
      addedCustomer.id = `nth${count}-customer`;
      addedCustomer.innerHTML = `<label style="display: block" class="mt-3"><b>CUSTOMER ${count}</b></label>
                        <label style="display: block;" class="mt-1" for="cus${count}">Name</label>
                        <input name="customerName${count}" id="cus${count}" type="text" class="form-control mt-2">

                        <label style="display: block;" class="mt-2" for="cus${count}-type">Customer Type</label>
                        <select class="form-control mt-2" name="customerType${count}" id="cus${count}-type">

                            {% for r in role_cus %}
                            <option>{{ r }}</option>
                            {% endfor %}
                        </select>
                        <input onclick='deleteCustomer(this)' type='button' value='Delete' class='btn btn-danger mt-2' />`;

      document.querySelector(
        "div.rest-customer"
      ).appendChild(addedCustomer)
    }
  };
</script>
{% endblock %}
